const initMap= function(){
    const latlon = new google.maps.LatLng(51.085710, 16.996450);

    const icon = new google.maps.MarkerImage(
      '/themes/depcore-theme/assets/images/icons/marker.png'
    );

    var locations = [
        ['<strong>Seoul</strong><br />', 37.566536, 126.977966, 4],
        ['<strong>Katowice</strong><br />Chorzowska 150 <br />tel.: +48 32 784 12 67', 50.270370, 18.997580, 5],
        ['<strong>Wrocław</strong><br /> Hallera 78 <br />tel.: +48 501 228 519', 51.085710, 16.996450, 3],
        ['<strong>Szczecin</strong><br />Zbożowa 4A/2 <br />tel.: +48 91 444 07 99', 53.423130, 14.564030, 2],
        ['<strong>Warszawa</strong><br />Żwirki i Wigury 16 A <br />tel.: +48 22 100 53 04', 52.189260, 20.981300, 1]
      ];


      var infowindow = new google.maps.InfoWindow();

      var marker, i;

    let pos = undefined;
    const positionFound = false;

    const style =  [
      {
          "featureType": "administrative",
          "elementType": "all",
          "stylers": [
              {
                  "visibility": "on"
              },
              {
                  "lightness": 33
              }
          ]
      },
      {
          "featureType": "landscape",
          "elementType": "all",
          "stylers": [
              {
                  "color": "#f7f7f7"
              }
          ]
      },
      {
          "featureType": "poi.business",
          "elementType": "all",
          "stylers": [
              {
                  "visibility": "off"
              }
          ]
      },
      {
          "featureType": "poi.park",
          "elementType": "geometry",
          "stylers": [
              {
                  "color": "#deecdb"
              }
          ]
      },
      {
          "featureType": "poi.park",
          "elementType": "labels",
          "stylers": [
              {
                  "visibility": "on"
              },
              {
                  "lightness": "25"
              }
          ]
      },
      {
          "featureType": "road",
          "elementType": "all",
          "stylers": [
              {
                  "lightness": "25"
              }
          ]
      },
      {
          "featureType": "road",
          "elementType": "labels.icon",
          "stylers": [
              {
                  "visibility": "off"
              }
          ]
      },
      {
          "featureType": "road.highway",
          "elementType": "geometry",
          "stylers": [
              {
                  "color": "#ffffff"
              }
          ]
      },
      {
          "featureType": "road.highway",
          "elementType": "labels",
          "stylers": [
              {
                  "saturation": "-90"
              },
              {
                  "lightness": "25"
              }
          ]
      },
      {
          "featureType": "road.arterial",
          "elementType": "all",
          "stylers": [
              {
                  "visibility": "on"
              }
          ]
      },
      {
          "featureType": "road.arterial",
          "elementType": "geometry",
          "stylers": [
              {
                  "color": "#ffffff"
              }
          ]
      },
      {
          "featureType": "road.local",
          "elementType": "geometry",
          "stylers": [
              {
                  "color": "#ffffff"
              }
          ]
      },
      {
          "featureType": "transit.line",
          "elementType": "all",
          "stylers": [
              {
                  "visibility": "off"
              }
          ]
      },
      {
          "featureType": "transit.station",
          "elementType": "all",
          "stylers": [
              {
                  "visibility": "off"
              }
          ]
      },
      {
          "featureType": "water",
          "elementType": "all",
          "stylers": [
              {
                  "visibility": "on"
              },
              {
                  "color": "#e0f1f9"
              }
          ]
      }
  ];

    const mapOptions = {
      zoom: 6,
      center: latlon,
      styles: style,
      scrollwheel: false
    };

    const contentString = "Tias";

    // const infowindow = new google.maps.InfoWindow({content: contentString});

    const map = new google.maps.Map(document.getElementById('map'), mapOptions);

    for (i = 0; i < locations.length; i++) {
        marker = new google.maps.Marker({
          position: new google.maps.LatLng(locations[i][1], locations[i][2]),
          map: map,
         icon
        });

        google.maps.event.addListener(marker, 'click', (function(marker, i) {
          return function() {
            infowindow.setContent(locations[i][0]);
            infowindow.open(map, marker);
          }
        })(marker, i));
    };

    google.maps.event.addListener(map, 'click', function(event) {
      this.setOptions({scrollwheel: true});
    });

    google.maps.event.addListener(map, 'mouseout', function(event) {
      this.setOptions({scrollwheel: false});
    });


}

const domReady = function(callback) {
  if ((document.readyState === 'interactive') || (document.readyState === 'complete')) { callback(); } else { document.addEventListener('DOMContentLoaded', callback); }
};

const initialize = function() {

  window.sr = ScrollReveal({duration: 2000});

  sr.reveal('section .icon-box, div.office', {
    origin:'bottom',
    distance: '130px',
    duration: 1300,
    delay: 400,
    scale: 1,
    interval:130
  });

  // sr.reveal('.offices .single-office',{
  //   origin:'bottom',
  //   duration: 1300,
  //   delay: 0,
  //   scale: 1,
  //   distance:'200px',
  //   interval:200
  // });

  var siteHeader = document.querySelector(".site-header");
  var hero = document.querySelector('.hero');
  hero.style.marginTop = siteHeader.offsetHeight + 'px';

  var headroom  = new Headroom(siteHeader, {
      "offset": 205,
      "tolerance": 5,
  });

  headroom.init();

  $(document).ready(function(){
    $('.carousel').slick({
      // fade: true,
      arrows: false,
      dots: true,
      slidesToShow:2,
      slidesToScroll: 2,
      infinite:false,
      responsive: [{
            breakpoint: 760,
            settings: {
              slidesToShow: 1,
              slidesToScroll: 1
            }
          },
      ]});

    $('.single-carousel').slick({
      fade: true,
      arrows: false,
      dots: false,
      slidesToShow:1,
      slidesToScroll: 1,
      infinite:false,
      autoplay: true,
      autoplaySpeed: 5000
      });

    $('.offices').slick({
      arrows: false,
      dots: false,
      slidesToShow:5,
      slidesToScroll: 1,
      infinite:false,
      responsive: [
        {
          breakpoint: 1024,
          settings: {
            slidesToShow: 3,
          }
        },
        {
          breakpoint: 700,
          settings: {
            slidesToShow: 2,
            autoplay: true,
            autoplaySpeed: 2000,
          }
        },
        {
          breakpoint: 410,
          settings: {
            slidesToShow: 1,
            autoplay: true,
            autoplaySpeed: 2000,
          }
        },
      ]});
  });

};

const swup = new Swup({
  elements: ['#page','.main-navigation','.hero','.site-header .logo a','.site-header .contact','.site-footer .copyright','.site-footer .blog-footer','.site-footer .block-1 > h4','.site-footer .block-1 > ul']
});


domReady(function() {
  menuToggle = document.querySelector('.menu-toggle');
  siteHeader = document.getElementById('masthead');
  menuToggle.addEventListener('click', function(e) {
    e.preventDefault();
    document.body.classList.toggle("toggled");
    return siteHeader.classList.toggle('toggled');
  });

  //add images loaded callback
  document.querySelector('.core_loader').classList.remove('-show');
  setTimeout(function(){
      document.querySelector('.core_loader').classList.remove('-front');
    }, 300);

  initialize();

});


document.addEventListener('swup:clickLink', function(event) {
  document.getElementById('masthead').classList.remove('toggled');
  document.body.classList.remove("toggled");
});

document.addEventListener('swup:contentReplaced', function(event) {

  initialize();
});

